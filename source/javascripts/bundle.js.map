{"version":3,"file":"bundle.js","sources":["site.js"],"sourcesContent":["$(document).ready(function(){\n  const videoPanelClient = videoPanel();\n  // const boxPanelClient = boxPanel();\n  const helpPanelClient = helpPanel();\n  const heyPanelClient = heyPanel();\n\n  $('.ga-click-event').on('click', function() {\n    var label = $(this).attr('ga-label');\n    var category = $(this).attr('ga-category');\n\n    gtag('event', 'click', {\n      'event_category': category,\n      'event_label': label,\n      'value': 1\n    });\n  });\n\n  function resizeHandler() {\n    videoPanelClient.scroller.resize();\n    // boxPanelClient.scroller.resize();\n    helpPanelClient.scroller.resize();\n    heyPanelClient.scroller.resize();\n  }\n\n  window.addEventListener(\"resize\", _.debounce(resizeHandler, 200));\n\n});\n\n\nfunction boxPanel(){\n  \n  const boxPanelScroller = scrollama();\n\n  function changeText() {\n\t  $('.text-fill').text(faker.random.word());\n  }\n\n  function emptyText() {\n\t  $('.text-fill').text('');\n  }\n\n  const tl = new TimelineMax({onStart: emptyText, paused: true});\n\n  tl.fromTo('.omega',0.2, {display:'none'}, {display:'inline-block'})\n  tl.fromTo('.whats-the' ,0.2, {display:'none'}, {display: 'inline-block'});\n  tl.call(changeText, [], this, \"+=0.2\");\n  tl.call(function(){$('.text-fill').text('weather?')}, [], this, \"+=0.2\");\n  tl.to('.last-item', 0.1, {x: -5, display: 'inline-block'}, \"+=0.1\");\n\n  boxPanelScroller.setup({\n    step: '.omega-box-wrapper .text',\n    offset: 0.2\n  })\n    .onStepEnter(event => {\n      tl.restart();\n      })\n    .onStepExit(event => {\n      tl.pause();\n    })\n  ;\n  return {\n    scroller: boxPanelScroller,\n    timeline: tl\n  };\n}\n\nfunction helpPanel(){\n  const helpPanelScroller = scrollama();\n  const tl = new TimelineMax({useFrames:true, paused:true, smoothChildTiming:true });\n\n  tl.from($('.last'), 2000, {ease: Power3.easeIn,opacity: 0, x: 100, scale:1.5});\n  tl.from($('.first'), 2000, {ease: Power3.easeIn,opacity: 0, x: -100, scale:1.5}, '-=2000');\n\n  helpPanelScroller\n    .setup({\n      step: [$('.help-animation-container')[0]],\n      offset: 0.95,\n      debug:true,\n      progress: true,\n      threshold: 1\n    })\n    .onStepProgress(event => {\n      tl.pause();\n      tl.progress(event.progress);\n    });\n  return {\n    scroller: helpPanelScroller,\n    timeline: tl\n  }\n}\n\nfunction heyPanel(){\n\n  const heyScroller = scrollama();\n  const outerCircle = new TimelineMax({yoyo:true, repeat: 7});\n  outerCircle.to('.outer-circle', 0.3, {ease:Bounce.easeIn, strokeWidth: 35});\n  const innerCircle = new TimelineMax({yoyo:true, repeat: 2});\n  innerCircle.set('.inner-circle', {strokeWidth: 10});\n  innerCircle.fromTo('.inner-circle', 0.3, {ease:Bounce.easeOut,strokeWidth: 10}, {ease:Bounce.easeOut,strokeWidth: 24});\n  innerCircle.to('.inner-circle', 0.3, {ease:Bounce.easeOut,strokeWidth: 10}, \"-=0.2\");\n  const mainAnimation = new TimelineMax({paused: true});\n  mainAnimation.add(outerCircle);\n  mainAnimation.add(innerCircle, \"-=1.6\");\n\n  heyScroller\n    .setup({\n      step:[$('.omega-hey-container')[0]],\n      debug:true,\n      offset: 0.2\n    })\n  .onStepEnter(event=>{\n    mainAnimation.restart();\n  })\n  .onStepExit(event => {\n\n    mainAnimation.seek(0);\n    mainAnimation.pause();\n  });\n\n  return {\n    scroller: heyScroller,\n    timeline:  mainAnimation\n  }\n}\n\nfunction update(){\n  let video = document.getElementsByTagName(\"video\")[0];\n  if(video.currentTime === video.duration) return;\n\tconst newCanvas = document.createElement('canvas');\n\tconst element = $('.video-sprite-sheet');\n\tlet newCtx = newCanvas.getContext('2d');\n  console.log(video.videoWidth);\n  newCanvas.width = video.videoWidth;\n  newCanvas.height= video.videoHeight;\n\tnewCtx.imageSmoothingEnabled = true;\n\tnewCtx.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);   \n\n\telement.append(newCanvas);\n\n\trequestAnimationFrame(update); // wait for t\n}\n\nfunction videoPanel(){\n\n  const scroller = scrollama();\n  const M2 = new TimelineMax({ useFrames: true, paused:true});\n  const videoElement = document.getElementsByTagName(\"video\")[0];\n\n  $(videoElement).one('play', function() {\n    update(); //Start rendering\n  });\n\n  $(videoElement).one('ended', function() {\n\t  \n    let container = $('.video-sprite-sheet');\n\t  let canvases = container.find('canvas');\n\t  let height = container[0].scrollHeight;\n\n\t  let lastCanvas = canvases.last();\n\t  let canvasCount = canvases.length;\n    let duration = 10;\n    console.log(lastCanvas, canvasCount);\n    var hidden = { position: 'absolute', visibility: 'hidden' };\n    var visible = { position: 'static', visibility: 'visible' };\n    M2.set(lastCanvas, hidden)\n      .staggerTo(canvases, 0, visible, duration, 0)\n    // hide all the elements except lastimage - it will be hidden on repeat if needed at the same time as first is shown\n      .staggerTo(canvases.not(lastCanvas), 0, $.extend(hidden, { immediateRender: false }), duration, duration)\n    // add an 'empty' set after lastimage is made visible - this adds padding at the end of the timeline so lastimage is displayed for the correct duration before the repeat\n      .set({}, {}, \"+=\"+duration);\n\t  \n\t  scroller.setup({\n\t\t  step: '.video-sprite-sheet',\n\t\t  progress: true,\n      threshold:10,\n\t\t  offset: 0.3,\n\t\t  debug:true\n\t  })\n\t    .onStepEnter(event => {\n\t\t    // M2.play();\n        })\n\t    .onStepProgress(event => {\n\t\t    M2.progress(event.progress);\n    });\n    $(this).hide();\n  });\n\n  return {\n    scroller: scroller,\n    timeline:  M2\n  }\n}\n"],"names":["$","document","ready","videoPanelClient","videoPanel","helpPanelClient","helpPanel","heyPanelClient","heyPanel","on","label","attr","category","gtag","resizeHandler","scroller","resize","window","addEventListener","_","debounce","helpPanelScroller","scrollama","tl","TimelineMax","useFrames","paused","smoothChildTiming","from","ease","Power3","easeIn","opacity","x","scale","setup","step","offset","debug","progress","threshold","onStepProgress","pause","event","timeline","heyScroller","outerCircle","yoyo","repeat","to","Bounce","strokeWidth","innerCircle","set","fromTo","easeOut","mainAnimation","add","onStepEnter","restart","onStepExit","seek","update","video","getElementsByTagName","currentTime","duration","newCanvas","createElement","element","newCtx","getContext","console","log","videoWidth","width","height","videoHeight","imageSmoothingEnabled","drawImage","append","requestAnimationFrame","M2","videoElement","one","container","canvases","find","scrollHeight","lastCanvas","last","canvasCount","length","hidden","position","visibility","visible","staggerTo","not","extend","immediateRender","hide"],"mappings":"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"}